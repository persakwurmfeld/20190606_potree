
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>6 West 77th</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" />
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/1.4.0/css/perfect-scrollbar.min.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/openlayers/4.6.4/ol.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.8/themes/default/style.min.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.0/spectrum.min.css" />
	<link rel="stylesheet" type="text/css" href="./lib/potree/potree.css">

</head>

<body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.0/spectrum.min.js"></script>
	<script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/build/ol.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
	<script src="./lib/perfect-scrollbar.jquery.min.js"></script>
	<script src="./lib/three.min.js"></script>
	<script src="./lib/i18next.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.3.0/Tween.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.9.2/d3.min.js"></script>
	<script src="./lib/BinaryHeap.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.5.0/proj4.js"></script>
	<script src="https://threejs.org/examples/js/loaders/OBJLoader.js"></script>
	<script src="https://threejs.org/examples/js/loaders/MTLLoader.js"></script>
	<script src="https://threejs.org/examples/js/loaders/PLYLoader.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.8/jstree.min.js"></script>
	<script src="./lib/potree/potree.js"></script>
	<script src="./lib/laslaz.js"></script>

	<div class="potree_container" style="position: absolute; width: 100%; height: 100%; left: 0px; top: 0px; ">
		<div id="potree_render_area"></div>
		<div id="potree_sidebar_container"> </div>
	</div>

	<script>

		window.viewer = new Potree.Viewer(document.getElementById("potree_render_area"));

		viewer.setEDLEnabled(true);
		viewer.setFOV(60);
		viewer.setPointBudget(1 * 1000 * 1000);
		viewer.loadSettingsFromURL();

		viewer.setDescription("");

		viewer.loadGUI(() => {
			viewer.setLanguage('en');
			$("#menu_appearance").next().show();
			viewer.toggleSidebar();
		});

		// 16
		Potree.loadPointCloud("https://raw.githubusercontent.com/persakwurmfeld/recZkkqefkFr2A999/master/cloud.js", "6_w77th_CONTEXT", function (e) {
			viewer.scene.addPointCloud(e.pointcloud);

			let material = e.pointcloud.material;
			material.size = 1;
			material.pointSizeType = Potree.PointSizeType.ADAPTIVE;

			viewer.fitToScreen();
        });

		Potree.loadPointCloud("https://raw.githubusercontent.com/persakwurmfeld/recMJPfl9qNivHhW6/master/cloud.js", "6_w77th_FACADE", function (e) {
			viewer.scene.addPointCloud(e.pointcloud);

			let material = e.pointcloud.material;
			material.size = 1;
			material.pointSizeType = Potree.PointSizeType.ADAPTIVE;

			viewer.fitToScreen();
        });

		Potree.loadPointCloud("https://raw.githubusercontent.com/persakwurmfeld/recmBmP0ugivx8Ghs/master/cloud.js", "6_w77th_PENTHOUSE_EXT", function (e) {
			viewer.scene.addPointCloud(e.pointcloud);

			let material = e.pointcloud.material;
			material.size = 1;
			material.pointSizeType = Potree.PointSizeType.ADAPTIVE;

			viewer.fitToScreen();
        });

		Potree.loadPointCloud("https://raw.githubusercontent.com/persakwurmfeld/recnUabphYLem9jen/master/cloud.js", "6_w77th_PENTHOUSE_INT_TOP", function (e) {
			viewer.scene.addPointCloud(e.pointcloud);

			let material = e.pointcloud.material;
			material.size = 1;
			material.pointSizeType = Potree.PointSizeType.ADAPTIVE;

			viewer.fitToScreen();
		});


		Potree.loadPointCloud("https://raw.githubusercontent.com/persakwurmfeld/recWUYvswnSG1P6Jt/master/cloud.js", "6_w77th_PENTHOUSE_INT_BTM", function (e) {
			viewer.scene.addPointCloud(e.pointcloud);

			let material = e.pointcloud.material;
			material.size = 1;
			material.pointSizeType = Potree.PointSizeType.ADAPTIVE;

			viewer.fitToScreen();
		});


		Potree.loadPointCloud("https://raw.githubusercontent.com/persakwurmfeld/recYj5rNmnTUrz74O/master/cloud.js", "6_w77th_PENTHOUSE_SHAFT", function (e) {
			viewer.scene.addPointCloud(e.pointcloud);

			let material = e.pointcloud.material;
			material.size = 1;
			material.pointSizeType = Potree.PointSizeType.ADAPTIVE;

			viewer.fitToScreen();
		});

		const loader = new THREE.PLYLoader()

		loader.load('https://raw.githubusercontent.com/persakwurmfeld/recQp6YtFxx6LhJ2Z/master/fp_exterior.ply', (geometry) => {

			geometry.computeVertexNormals();

			var material = new THREE.MeshStandardMaterial({ color: "#7FEFBD", flatShading: true, side: THREE.doubleSide });

			var mesh = new THREE.Mesh(geometry, material);

			mesh.scale.multiplyScalar(0.0254);

			mesh.material.side = THREE.doubleSide;

			mesh.castShadow = true;
			mesh.receiveShadow = true;
			viewer.scene.scene.add(mesh);

			// Add entries to object list in sidebar
			let tree = $(`#jstree_scene`);
			let parentNode = "other";

			let node = tree.jstree('create_node', parentNode, {
				"text": "FP EXT",
				"icon": `${Potree.resourcePath}/icons/triangle.svg`,
				"data": mesh
			},
				"last", false, false);

			tree.jstree(mesh.visible ? "check_node" : "uncheck_node", node);
		})

		loader.load('https://raw.githubusercontent.com/persakwurmfeld/recQp6YtFxx6LhJ2Z/master/fp_interior.ply', (geometry) => {

			geometry.computeVertexNormals();

			var material = new THREE.MeshStandardMaterial({ color: "#9DD1F1", flatShading: true, side: THREE.doubleSide });

			var mesh = new THREE.Mesh(geometry, material);

			mesh.scale.multiplyScalar(0.0254);

			mesh.material.side = THREE.doubleSide;

			mesh.castShadow = true;
			mesh.receiveShadow = true;
			viewer.scene.scene.add(mesh);

			// Add entries to object list in sidebar
			let tree = $(`#jstree_scene`);
			let parentNode = "other";

			let node = tree.jstree('create_node', parentNode, {
				"text": "FP INT",
				"icon": `${Potree.resourcePath}/icons/triangle.svg`,
				"data": mesh
			},
				"last", false, false);

			tree.jstree(mesh.visible ? "check_node" : "uncheck_node", node);
		})

		loader.load('https://raw.githubusercontent.com/persakwurmfeld/reci5ymagapyWPwQZ/master/100_structure.ply', (geometry) => {

			geometry.computeVertexNormals();

			var material = new THREE.MeshStandardMaterial({ color: "#444444", flatShading: true, side: THREE.doubleSide });

			var mesh = new THREE.Mesh(geometry, material);

			mesh.scale.multiplyScalar(0.0254);

			mesh.material.side = THREE.doubleSide;

			mesh.castShadow = true;
			mesh.receiveShadow = true;
			viewer.scene.scene.add(mesh);

			// Add entries to object list in sidebar
			let tree = $(`#jstree_scene`);
			let parentNode = "other";

			let node = tree.jstree('create_node', parentNode, {
				"text": "100 - STRUCTURE",
				"icon": `${Potree.resourcePath}/icons/triangle.svg`,
				"data": mesh
			},
				"last", false, false);

			tree.jstree(mesh.visible ? "check_node" : "uncheck_node", node);
		})

		loader.load('https://raw.githubusercontent.com/persakwurmfeld/reci5ymagapyWPwQZ/master/100_structure.ply', (geometry) => {

			geometry.computeVertexNormals();

			var material = new THREE.MeshStandardMaterial({ color: "#444444", flatShading: true, side: THREE.doubleSide });

			var mesh = new THREE.Mesh(geometry, material);

			mesh.scale.multiplyScalar(0.0254);

			mesh.material.side = THREE.doubleSide;

			mesh.castShadow = true;
			mesh.receiveShadow = true;
			viewer.scene.scene.add(mesh);

			// Add entries to object list in sidebar
			let tree = $(`#jstree_scene`);
			let parentNode = "other";

			let node = tree.jstree('create_node', parentNode, {
				"text": "100 - STRUCTURE",
				"icon": `${Potree.resourcePath}/icons/triangle.svg`,
				"data": mesh
			},
				"last", false, false);

			tree.jstree(mesh.visible ? "check_node" : "uncheck_node", node);
		})

		loader.load('https://raw.githubusercontent.com/persakwurmfeld/reci5ymagapyWPwQZ/master/600_interior_outfitting.ply', (geometry) => {

			geometry.computeVertexNormals();

			var material = new THREE.MeshStandardMaterial({ color: "#F1E8B8", flatShading: true, side: THREE.doubleSide });

			var mesh = new THREE.Mesh(geometry, material);

			mesh.scale.multiplyScalar(0.0254);

			mesh.material.side = THREE.doubleSide;

			mesh.castShadow = true;
			mesh.receiveShadow = true;
			viewer.scene.scene.add(mesh);

			// Add entries to object list in sidebar
			let tree = $(`#jstree_scene`);
			let parentNode = "other";

			let node = tree.jstree('create_node', parentNode, {
				"text": "600 - INTERIOR OUTFITTING",
				"icon": `${Potree.resourcePath}/icons/triangle.svg`,
				"data": mesh
			},
				"last", false, false);

			tree.jstree(mesh.visible ? "check_node" : "uncheck_node", node);
		})

		loader.load('https://raw.githubusercontent.com/persakwurmfeld/reci5ymagapyWPwQZ/master/700_exterior_outfitting.ply', (geometry) => {

			geometry.computeVertexNormals();


			var material = new THREE.MeshStandardMaterial({ color: "#FF6666", flatShading: true});

			var mesh = new THREE.Mesh(geometry, material);

			mesh.scale.multiplyScalar(0.0254);

			mesh.material.side = THREE.doubleSide;

			mesh.castShadow = true;
			mesh.receiveShadow = true;
			viewer.scene.scene.add(mesh);

			// Add entries to object list in sidebar
			let tree = $(`#jstree_scene`);
			let parentNode = "other";

			let node = tree.jstree('create_node', parentNode, {
				"text": "700 - EXTERIOR OUTFITTING",
				"icon": `${Potree.resourcePath}/icons/triangle.svg`,
				"data": mesh
			},
				"last", false, false);

			tree.jstree(mesh.visible ? "check_node" : "uncheck_node", node);
		})


		loader.load('https://raw.githubusercontent.com/persakwurmfeld/reci5ymagapyWPwQZ/master/500_auxiliary_systems.ply', (geometry) => {

			geometry.computeVertexNormals();

			var material = new THREE.MeshStandardMaterial({ color: "#CCFF66", flatShading: true });

			var mesh = new THREE.Mesh(geometry, material);

			mesh.scale.multiplyScalar(0.0254);

			mesh.castShadow = true;
			mesh.receiveShadow = true;
			mesh.side = THREE.doubleSide;
			viewer.scene.scene.add(mesh);

			// Add entries to object list in sidebar
			let tree = $(`#jstree_scene`);
			let parentNode = "other";

			let node = tree.jstree('create_node', parentNode, {
				"text": "500 - AUXILIARY SYSTEMS",
				"icon": `${Potree.resourcePath}/icons/triangle.svg`,
				"data": mesh
			},
				"last", false, false);

			tree.jstree(mesh.visible ? "check_node" : "uncheck_node", node);
		})

				var mtlLoader = new THREE.MTLLoader();
		mtlLoader.load('https://raw.githubusercontent.com/persakwurmfeld/recQp6YtFxx6LhJ2Z/master/structure.mtl', function (materials) {

			materials.preload();

			var objLoader = new THREE.OBJLoader();

			objLoader.setMaterials(materials);
			objLoader.load('https://raw.githubusercontent.com/persakwurmfeld/recQp6YtFxx6LhJ2Z/master/structure.obj', function (object) {
			object.scale.multiplyScalar(0.0254);
				// object.position.y = - 95;
				viewer.scene.scene.add(object);

			let tree = $(`#jstree_scene`);
			let parentNode = "other";

			let node = tree.jstree('create_node', parentNode, {
				"text": "Overlay_STRUCTURE",
				"icon": `${Potree.resourcePath}/icons/triangle.svg`,
				"data": object
			},
				"last", false, false);

			tree.jstree(object.visible ? "check_node" : "uncheck_node", node);

			}, console.log, console.log);

		});

		mtlLoader.load('https://raw.githubusercontent.com/persakwurmfeld/recQp6YtFxx6LhJ2Z/master/section.mtl', function (materials) {

			materials.preload();

			var objLoader = new THREE.OBJLoader();

			objLoader.setMaterials(materials);
			objLoader.load('https://raw.githubusercontent.com/persakwurmfeld/recQp6YtFxx6LhJ2Z/master/section.obj', function (object) {
			object.scale.multiplyScalar(0.0254);
				// object.position.y = - 95;
				viewer.scene.scene.add(object);

			let tree = $(`#jstree_scene`);
			let parentNode = "other";

			let node = tree.jstree('create_node', parentNode, {
				"text": "Overlay_SECTION",
				"icon": `${Potree.resourcePath}/icons/triangle.svg`,
				"data": object
			},
				"last", false, false);

			tree.jstree(object.visible ? "check_node" : "uncheck_node", node);

			}, console.log, console.log);

		});

		mtlLoader.load('https://raw.githubusercontent.com/persakwurmfeld/recQp6YtFxx6LhJ2Z/master/typical_floor.mtl', function (materials) {

			materials.preload();

			var objLoader = new THREE.OBJLoader();

			objLoader.setMaterials(materials);
			objLoader.load('https://raw.githubusercontent.com/persakwurmfeld/recQp6YtFxx6LhJ2Z/master/typical_floor.obj', function (object) {
			object.scale.multiplyScalar(0.0254);
				// object.position.y = - 95;
				viewer.scene.scene.add(object);

			let tree = $(`#jstree_scene`);
			let parentNode = "other";

			let node = tree.jstree('create_node', parentNode, {
				"text": "Overlay_TYP_Floor",
				"icon": `${Potree.resourcePath}/icons/triangle.svg`,
				"data": object
			},
				"last", false, false);

			tree.jstree(object.visible ? "check_node" : "uncheck_node", node);

			}, console.log, console.log);

		});
	</script>
</body>

</html>
